<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ù‚Ù†Ø§Ø© Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù„ÙˆØ´ÙŠ â€“ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root {
  --bg:#f2f4f7;
  --header:#2563eb;
  --header-dark:#1e40af;
  --text:#1e293b;
  --bubble:#ffffff;
  --bubble-shadow:rgba(0,0,0,0.07);
  --send:#2563eb;
  --send-hover:#1e40af;
}

body {
  margin:0;
  background:var(--bg);
  font-family:"Cairo",sans-serif;
  color:var(--text);
}

/* ===== App Header ===== */
.app-header {
  position:sticky;
  top:0;
  background:var(--header);
  padding:18px 16px;
  text-align:center;
  font-size:22px;
  font-weight:700;
  color:white;
  box-shadow:0 2px 12px rgba(0,0,0,0.2);
  z-index:99;
}

/* ===== Container ===== */
.container {
  max-width:520px;
  margin:0 auto;
  padding:15px;
}

/* ===== Input Card ===== */
.input-card {
  background:var(--bubble);
  padding:18px;
  border-radius:14px;
  box-shadow:0 3px 10px var(--bubble-shadow);
  margin-bottom:20px;
}

input, textarea {
  width:100%;
  padding:12px;
  margin:8px 0;
  border-radius:10px;
  border:1px solid #cbd5e1;
  font-size:16px;
  background:#f8fafc;
}
input:focus, textarea:focus {
  border-color:var(--header);
  background:white;
}

/* ===== Send Button ===== */
.send-btn {
  width:100%;
  padding:13px;
  background:var(--send);
  color:white;
  border:none;
  border-radius:12px;
  font-size:18px;
  font-weight:600;
  cursor:pointer;
  transition:0.25s;
}
.send-btn:hover {
  background:var(--send-hover);
}

/* ===== Notes ===== */
.note {
  background:var(--bubble);
  padding:15px 18px;
  border-radius:14px;
  box-shadow:0 3px 10px var(--bubble-shadow);
  margin:16px 0;
}

.note-name {
  font-weight:700;
  font-size:17px;
}

.note-text {
  margin-top:6px;
  line-height:1.85;
  font-size:16px;
}

.note img {
  width:100%;
  border-radius:10px;
  margin-top:12px;
}

.reply-box {
  background:#e7fff4;
  border-right:5px solid #10b981;
  padding:12px;
  border-radius:10px;
  margin-top:14px;
  font-size:15px;
}

.wait {
  margin-top:10px;
  color:#777;
  font-size:15px;
}

/* ===== Footer Navigation ===== */
.footer-nav {
  text-align:center;
  margin-top:30px;
  font-size:15px;
  color:#555;
}
.footer-nav a {
  color:var(--header);
  text-decoration:none;
  font-weight:700;
}
</style>
</head>

<body>

<div class="app-header">ğŸ“¬ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆØ§Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª</div>

<div class="container">

  <!-- Ø¥Ø±Ø³Ø§Ù„ Ù…Ù„Ø§Ø­Ø¸Ø© -->
  <div class="input-card">
    <h3 style="margin-top:0; font-size:20px;">Ø¥Ø±Ø³Ø§Ù„ Ù…Ù„Ø§Ø­Ø¸Ø© Ø¬Ø¯ÙŠØ¯Ø©</h3>

    <input id="name" placeholder="Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…">
    <textarea id="message" placeholder="Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸ØªÙƒâ€¦" rows="4"></textarea>
    <input type="file" id="image">

    <button class="send-btn" onclick="sendNote()">Ø¥Ø±Ø³Ø§Ù„</button>
    <p id="status" style="margin-top:10px; color:green;"></p>
  </div>

  <!-- Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª -->
  <h3 style="padding-right:4px;">Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø£Ø®ÙŠØ±Ø©:</h3>
  <div id="notes"></div>

  <div class="footer-nav">
    Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø±Ø¯ÙˆØ¯ ÙˆØ§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§ØªØŸ  
    <a href="admin.html">Ø§Ø¶ØºØ· Ù‡Ù†Ø§</a>
    <br><br>
    Ù‚Ù†Ø§Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨:  
    <a href="https://whatsapp.com/channel/0029VamotBKCxoAy3fzUcv3T">Ø§Ù„Ø¶ØºØ· Ù„Ù„Ø¯Ø®ÙˆÙ„</a>
    <br>
    Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø¯ÙˆÙ†Ø©:  
    <a href="https://omk811.blogspot.com/">Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹</a>
  </div>

</div>


<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbxjYH9nm0VsGuD0qz7MVLUD8CqLpVlI2dPqCOX5qd1qVITw2APMYruvoOF3WVM88w/exec";

async function sendNote(){
  const name = document.getElementById("name").value.trim();
  const message = document.getElementById("message").value.trim();
  const imgFile = document.getElementById("image").files[0];

  if(!name || !message){
    document.getElementById("status").innerText = "â— Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ¹Ø¨Ø¦Ø© ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„";
    return;
  }

  document.getElementById("status").innerText = "â³ ÙŠØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„â€¦";

  let base64 = "";
  if(imgFile){
    const reader = new FileReader();
    reader.onloadend = () => {
      base64 = reader.result;
      submitNote(name, message, base64);
    };
    reader.readAsDataURL(imgFile);
  } else {
    submitNote(name, message, "");
  }
}

async function submitNote(name, message, image){
  await fetch(scriptURL, {
    method:"POST",
    body:JSON.stringify({
      type:"note",
      name,
      message,
      image
    })
  });

  document.getElementById("status").innerText = "âœ” ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©!";
  loadNotes();
}

async function loadNotes(){
  const res = await fetch(scriptURL + "?getData");
  const data = await res.json();

  let box = document.getElementById("notes");
  box.innerHTML = "";

  data.forEach(r => {
    box.innerHTML += `
      <div class="note">
        <div class="note-name">${r.name}</div>
        <div class="note-text">${r.message}</div>
        ${r.image ? `<img src="${r.image}">` : ""}
        ${
  r.reply || r.replyImage
    ? `
      <div class="reply-box">
        ${r.reply ? `<b>Ø±Ø¯ Ø§Ù„Ù…Ø´Ø±Ù:</b> ${r.reply}<br><br>` : ""}
        ${r.replyImage ? `<img src="${r.replyImage}" style="max-width:100%; border-radius:10px;">` : ""}
      </div>
    `
    : `<div class="wait">â³ Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø¯</div>`
}
      </div>
    `;
  });
}

loadNotes();
</script>

</body>
</html>
