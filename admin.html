<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">

<title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;700&display=swap" rel="stylesheet">

<style>
    body {
        font-family:"Cairo", sans-serif;
        background: linear-gradient(135deg,#eef2ff,#faf5ff);
        padding:30px;
    }

    .login-box, .dashboard {
        max-width:900px;
        margin:auto;
        background:white;
        padding:30px;
        border-radius:20px;
        box-shadow:0 10px 25px rgba(0,0,0,0.1);
    }

    h2 { text-align:center; color:#4f46e5; }

    input {
        width:100%;
        padding:14px;
        border:#ddd solid 1px;
        border-radius:12px;
        margin-top:10px;
        font-size:16px;
    }

    button {
        width:100%;
        padding:14px;
        background:linear-gradient(135deg,#4f46e5,#7c3aed);
        color:white;
        border:none;
        border-radius:12px;
        font-size:18px;
        cursor:pointer;
        margin-top:15px;
    }

    .note {
        background:white;
        padding:18px;
        border-radius:14px;
        margin:10px 0;
        border-right:5px solid #4f46e5;
        cursor:pointer;
        box-shadow:0 5px 12px rgba(0,0,0,0.05);
        transition:0.3s;
    }

    .note:hover { transform:translateX(-5px); }

    .reply-box {
        background:#f8fafc;
        padding:20px;
        border-radius:14px;
        margin-top:25px;
    }
</style>
</head>

<body>

<div id="loginBox" class="login-box">
    <h2>ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
    <input id="pass" type="password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
    <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
    <p id="loginStatus" style="color:red;text-align:center;"></p>
</div>

<div id="dashboard" class="dashboard" style="display:none;">
    <h2>âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>

    <div id="notesList"></div>

    <div class="reply-box">
        <h3>ğŸ”„ Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©</h3>
        <textarea id="reply" rows="3" style="width:100%;padding:12px;border-radius:12px;border:1px solid #ddd;"></textarea>
        <button onclick="sendReply()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯</button>
    </div>
</div>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbzI1WkE0fUr6HaYiNMBiDn9JfTIByXjCvjQ6jnTyasz5Asyn0mLX4dNrcLVFADVHKMr/exec";
const PASSWORD = "aysha123";

let selectedRow = null;

function login() {
    const inp = document.getElementById("pass").value;
    if (inp === PASSWORD) {
        loginBox.style.display = "none";
        dashboard.style.display = "block";
        loadNotes();
    } else {
        loginStatus.innerHTML = "âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙŠØ± ØµØ­ÙŠØ­Ø©";
    }
}

async function loadNotes() {
    const res = await fetch(scriptURL, {
        method:"POST",
        body:JSON.stringify({ type:"get" })
    });

    const data = await res.json();
    notesList.innerHTML = "";

    data.data.forEach(n=>{
        notesList.innerHTML += `
            <div class="note" onclick="select(${n.row})">
                <b>${n.name}</b> â€” <span>${n.status}</span><br>
                ${n.note}
            </div>
        `;
    });
}

function select(row) {
    selectedRow = row;
    alert("ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ø±Ù‚Ù… " + row);
}

async function sendReply() {
    if (!selectedRow) return alert("Ø§Ø®ØªØ± Ù…Ù„Ø§Ø­Ø¸Ø© Ø£ÙˆÙ„Ø§Ù‹");
    const reply = document.getElementById("reply").value;

    await fetch(scriptURL, {
        method:"POST",
        body:JSON.stringify({ type:"reply", row:selectedRow, reply })
    });

    alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯");
    loadNotes();
}
</script>

</body>
</html>
