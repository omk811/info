<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ù„Ù…Ø´Ø±Ù) â€“ Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù„ÙˆØ´ÙŠ</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --secondary: #10b981;
            --light: #f8fafc;
            --dark: #1e293b;
            --gray: #64748b;
            --light-gray: #e2e8f0;
            --white: #ffffff;
            --shadow: rgba(0, 0, 0, 0.08);
            --shadow-hover: rgba(0, 0, 0, 0.12);
            --error: #ef4444;
            --success: #10b981;
            --warning: #f59e0b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--light);
            color: var(--dark);
            font-family: "Cairo", sans-serif;
            line-height: 1.6;
        }

        /* ØªØ®Ø·ÙŠØ· Ø§Ù„ØµÙØ­Ø© */
        .navbar {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            color: var(--white);
            padding: 20px;
            text-align: center;
            font-size: 24px;
            font-weight: 700;
            box-shadow: 0 4px 12px var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 20px;
        }
        
        @media (max-width: 1024px) {
            .container {
                grid-template-columns: 1fr;
            }
        }

        /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª ÙˆØ§Ù„Ø£Ø²Ø±Ø§Ø± */
        .card {
            background: var(--white);
            border-radius: 16px;
            box-shadow: 0 4px 12px var(--shadow);
            padding: 24px;
            margin-bottom: 24px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 16px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        input, textarea {
            width: 100%;
            padding: 14px;
            border-radius: 12px;
            border: 2px solid var(--light-gray);
            font-family: "Cairo", sans-serif;
            font-size: 16px;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .btn {
            padding: 14px 20px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--white);
        }

        .btn-primary:hover:not(:disabled) {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(37, 99, 235, 0.3);
        }
        
        .btn-success {
            background: var(--success);
            color: var(--white);
        }

        .btn-success:hover:not(:disabled) {
            background: #0d9668;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(16, 185, 129, 0.3);
        }
        
        .btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
            opacity: 0.7;
            transform: none;
            box-shadow: none;
        }

        /* Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ù„ØªØµÙÙŠØ© */
        .counter-box {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .counter {
            background: var(--light);
            flex: 1;
            min-width: 160px;
            text-align: center;
            padding: 20px 16px;
            border-radius: 12px;
            font-weight: 700;
            box-shadow: 0 2px 6px var(--shadow);
            border-right: 5px solid;
            transition: transform 0.3s ease;
        }
        
        .counter-value { font-size: 28px; }

        .counter.total { border-right-color: var(--primary); }
        .counter.total .counter-value { color: var(--primary); }

        .counter.new { border-right-color: var(--warning); }
        .counter.new .counter-value { color: var(--warning); }

        .counter.replied { border-right-color: var(--success); }
        .counter.replied .counter-value { color: var(--success); }

        .counter.images { border-right-color: #8b5cf6; }
        .counter.images .counter-value { color: #8b5cf6; }

        .filter-btn {
            flex: 1;
            min-width: 120px;
            padding: 12px 16px;
            border-radius: 12px;
            background: var(--white);
            border: 2px solid var(--light-gray);
            cursor: pointer;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s ease;
        }

        .filter-btn:hover {
            background: var(--light-gray);
        }

        .filter-btn.active {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }

        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆØ¹Ø±Ø¶Ù‡Ø§ */
        .notes-list {
            margin-top: 20px;
            max-height: 600px;
            overflow-y: auto;
            border-radius: 16px; /* Ù„Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø²ÙˆØ§ÙŠØ§ Ø§Ù„Ù…Ø³ØªØ¯ÙŠØ±Ø© Ù„Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª */
        }

        .note-box {
            border: 1px solid var(--light-gray);
            padding: 20px;
            border-radius: 16px;
            background: var(--white);
            margin-bottom: 12px;
            box-shadow: 0 2px 8px var(--shadow);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .note-box:last-child { margin-bottom: 0; }

        .note-box:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px var(--shadow-hover);
        }

        .note-box.unreplied { border-right: 5px solid var(--warning); }
        .note-box.replied { border-right: 5px solid var(--success); }

        .note-box.selected {
            background: #e0f2fe; /* Ù„ÙˆÙ† Ø£ÙØªØ­ Ù„Ù„Ø§Ø®ØªÙŠØ§Ø± */
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.15);
        }

        .note-author {
            font-weight: 700;
            font-size: 18px;
            color: var(--primary-dark);
        }

        .note-content {
            white-space: pre-wrap; /* Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø·Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
        }
        
        .reply-box {
            background: #f0fdf4;
            border-radius: 12px;
            padding: 16px;
            margin-top: 16px;
            border-right: 5px solid var(--success);
        }
        
        /* Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… */
        #popup {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: 600;
            z-index: 1000;
            display: none;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }
        
        .status-message {
            padding: 12px 16px;
            border-radius: 12px;
            margin-top: 16px;
            text-align: center;
            font-weight: 600;
        }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ù…Ø®ØµØµ */
        .notes-list::-webkit-scrollbar { width: 8px; }
        .notes-list::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        .notes-list::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; }
        .notes-list::-webkit-scrollbar-thumb:hover { background: var(--primary-dark); }
    </style>
</head>

<body>
    <div id="popup"></div>

    <div class="navbar">
        <i class="fas fa-cogs"></i> Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª
    </div>

    <div class="container">
        <div class="card login-form" id="loginBox">
            <h2 class="card-title login-title"><i class="fas fa-lock"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
            
            <div class="form-group">
                <label for="adminPass">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                <input id="adminPass" type="password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
            </div>
            
            <button class="btn btn-primary" id="loginBtn" style="width: 100%;">
                <i class="fas fa-sign-in-alt"></i> Ø¯Ø®ÙˆÙ„
            </button>
            
            <div id="loginStatus" class="status-message" style="display: none;"></div>
        </div>

        <div id="adminPanel" style="display:none;">
            <div class="main-content">
                <div class="card">
                    <div class="action-buttons" style="display: flex; gap: 12px;">
                        <button class="btn btn-secondary" onclick="window.location.href='index.html'">
                            <i class="fas fa-arrow-right"></i> Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                        </button>
                        <button class="btn btn-primary" id="refreshBtn">
                            <i class="fas fa-sync-alt"></i> ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                        </button>
                        <button class="btn btn-danger" id="logoutBtn" style="background: var(--error);">
                            <i class="fas fa-sign-out-alt"></i> Ø®Ø±ÙˆØ¬
                        </button>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title"><i class="fas fa-chart-bar"></i> Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</h3>
                    
                    <div class="counter-box">
                        <div class="counter total">
                            <div class="counter-title">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</div>
                            <div class="counter-value" id="countTotal">0</div>
                        </div>
                        <div class="counter new">
                            <div class="counter-title">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©</div>
                            <div class="counter-value" id="countNew">0</div>
                        </div>
                        <div class="counter replied">
                            <div class="counter-title">ØªÙ… Ø§Ù„Ø±Ø¯ Ø¹Ù„ÙŠÙ‡Ø§</div>
                            <div class="counter-value" id="countReplied">0</div>
                        </div>
                        <div class="counter images">
                            <div class="counter-title">ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ØµÙˆØ±</div>
                            <div class="counter-value" id="countWithImg">0</div>
                        </div>
                    </div>

                    <div class="filter-box" style="display: flex; gap: 12px; flex-wrap: wrap;">
                        <button class="filter-btn active" data-filter="all">
                            <i class="fas fa-list"></i> Ø§Ù„ÙƒÙ„
                        </button>
                        <button class="filter-btn" data-filter="new">
                            <i class="fas fa-clock"></i> Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                        </button>
                        <button class="filter-btn" data-filter="replied">
                            <i class="fas fa-check-circle"></i> ØªÙ… Ø§Ù„Ø±Ø¯
                        </button>
                        <button class="filter-btn" data-filter="img">
                            <i class="fas fa-image"></i> Ù…Ø¹ ØµÙˆØ±Ø©
                        </button>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title"><i class="fas fa-comments"></i> Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</h3>
                    
                    <div id="notesList" class="notes-list">
                        </div>
                </div>
            </div>

            <div class="sidebar">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-reply"></i> Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©</h3>
                    
                    <div id="selectedNoteInfo" class="selected-note-info" style="display: none;">
                         <div class="selected-note-title">
                            <i class="fas fa-sticky-note"></i> Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© (<span id="selectedNoteAuthor">...</span>)
                        </div>
                        <div class="selected-note-content" id="selectedNoteContent">
                            </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="replyText">Ù†Øµ Ø§Ù„Ø±Ø¯</label>
                        <textarea id="replyText" rows="4" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ø¯ Ù‡Ù†Ø§..."></textarea>
                        <small style="color: var(--gray); margin-top: 5px; display: block;">
                            <i class="fas fa-info-circle"></i> Ø³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¥Ù„Ù‰ Ø±ÙˆØ§Ø¨Ø· Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù†Ù‚Ø±
                        </small>
                    </div>
                    
                    <div class="form-group">
                        <label>Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø© Ù„Ù„Ø±Ø¯ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                        <div class="file-input-container">
                            <div class="file-input-label">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <span>Ø§Ø®ØªØ± ØµÙˆØ±Ø©</span>
                            </div>
                            <input type="file" id="replyImage" class="file-input" accept="image/*">
                        </div>
                        <div class="file-name" id="replyFileName"></div>
                    </div>
                    
                    <button class="btn btn-success" id="sendReplyBtn" style="width: 100%;">
                        <i class="fas fa-paper-plane"></i> Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯
                    </button>
                    
                    <div id="replyStatus" class="status-message" style="display: none;"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // *** Ù†Ù‚Ø·Ø© Ù‡Ø§Ù…Ø©: ÙŠØ¬Ø¨ Ù†Ù‚Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¥Ù„Ù‰ Ù…ÙƒØ§Ù† Ø¢Ù…Ù† ÙÙŠ Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø®Ø§Ø¯Ù… (Google Apps Script) Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ØªØºÙŠØ± Ø¨ÙŠØ¦Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ø´Ø±.
        // ØªÙ… Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ù‡Ù†Ø§ Ù„Ø£Ø³Ø¨Ø§Ø¨ Ø£Ù…Ù†ÙŠØ© ÙˆÙ„Ù†ÙØªØ±Ø¶ Ø£Ù†Ùƒ Ø³ØªÙ…Ø±Ø±Ù‡Ø§ Ø¹Ø¨Ø± Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ ÙÙ‚Ø·.
        // Ù„Ù† ÙŠØªÙ… ØªØ®Ø²ÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù‡Ù†Ø§.
        const scriptURL = "https://script.google.com/macros/s/AKfycbwYHinObYYU2v6wUJ5Eys54nHy0BJKt3N34rGu6qKoCfDt4h1R_5fu3WMbKHN50hMNr/exec";
        const ADMIN_SESSION_KEY = "OmanK123";
        
        let allNotes = [];
        let currentFilter = 'all';
        let selectedNote = null;
        
        // =========================================================================
        // 1. ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¹Ø§Ù…Ø©
        // =========================================================================
        
        /**
         * ÙŠØ­ÙˆÙ„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù†ØµÙŠØ© Ø¥Ù„Ù‰ Ø±ÙˆØ§Ø¨Ø· HTML Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù†Ù‚Ø±
         * @param {string} text - Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø±Ø§Ø¯ Ù…Ø¹Ø§Ù„Ø¬ØªÙ‡
         * @returns {string} Ø§Ù„Ù†Øµ Ø¨Ø¹Ø¯ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·
         */
        function convertLinksToClickable(text) {
            if (!text) return '';
            const urlRegex = /(https?:\/\/[^\s]+)/g;
            
            return text.replace(urlRegex, function(url) {
                const cleanUrl = url.replace(/[.,!?;:]$/, '');
                return `<a href="${cleanUrl}" target="_blank" rel="noopener noreferrer" style="color: var(--primary); text-decoration: underline; font-weight: 600;">${cleanUrl}</a>`;
            });
        }
        
        /**
         * ÙŠØ¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© Ø£Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø©
         * @param {string} msg - Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø±Ø§Ø¯ Ø¹Ø±Ø¶Ù‡Ø§
         * @param {string} type - Ù†ÙˆØ¹ Ø§Ù„Ø±Ø³Ø§Ù„Ø© ("success" Ø£Ùˆ "error")
         */
        function popup(msg, type = "success") {
            const p = document.getElementById("popup");
            p.innerText = msg;
            p.className = type === "success" ? "popup-success" : "popup-error";
            p.style.display = 'block';
            p.style.animation = 'none'; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø­Ø±ÙƒØ©
            p.offsetHeight; // Ù„ÙØ±Ø¶ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„
            p.style.animation = 'fadeInOut 2.5s ease';
            
            setTimeout(() => {
                p.style.display = 'none';
            }, 2500);
        }

        /**
         * ÙŠØ­ÙˆÙ„ Ù…Ù„Ù Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ base64
         * @param {File} file - Ù…Ù„Ù Ø§Ù„ØµÙˆØ±Ø©
         * @returns {Promise<string>} Ø³Ù„Ø³Ù„Ø© Base64
         */
        function toBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
            });
        }
        
        // =========================================================================
        // 2. ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø©
        // =========================================================================
        
        /**
         * Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
         */
        async function handleLogin() {
            const passInput = document.getElementById("adminPass");
            const pass = passInput.value.trim();
            const loginStatus = document.getElementById("loginStatus");
            const loginBtn = document.getElementById("loginBtn");

            if (!pass) {
                loginStatus.textContent = "âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±";
                loginStatus.className = "status-message status-error";
                loginStatus.style.display = "block";
                return;
            }

            loginBtn.disabled = true;
            loginBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...';
            loginStatus.style.display = "none";
            
            try {
                // Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ø­Ù„ÙŠØ§Ù‹ØŒ Ù†Ø±Ø³Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¥Ù„Ù‰ Apps Script Ù„ÙŠØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù†Ù‡Ø§
                const res = await fetch(scriptURL, {
                    method: "POST",
                    body: JSON.stringify({ type: "checkPassword", password: pass })
                });

                const result = await res.json();

                if (result.success) {
                    sessionStorage.setItem(ADMIN_SESSION_KEY, "true");
                    setupAdminPanel();
                    popup("âœ” ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­");
                } else {
                    loginStatus.textContent = "âŒ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
                    loginStatus.className = "status-message status-error";
                    loginStatus.style.display = "block";
                }
            } catch (error) {
                loginStatus.textContent = "âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù….";
                loginStatus.className = "status-message status-error";
                loginStatus.style.display = "block";
                console.error("Login error:", error);
            } finally {
                loginBtn.disabled = false;
                loginBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> Ø¯Ø®ÙˆÙ„';
            }
        }
        
        /**
         * Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù„ÙˆØ­Ø© Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
         */
        function setupAdminPanel() {
            document.getElementById("loginBox").style.display = "none";
            document.getElementById("adminPanel").style.display = "grid";
            loadNotes();
        }
        
        /**
         * ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
         */
        function handleLogout() {
            sessionStorage.removeItem(ADMIN_SESSION_KEY);
            document.getElementById("adminPanel").style.display = "none";
            document.getElementById("loginBox").style.display = "flex";
            document.getElementById("adminPass").value = "";
            window.scrollTo(0, 0); // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ø£Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©
            popup("ğŸšª ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­", "error");
        }
        
        /**
         * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ù„Ø³Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
         */
        function checkSession() {
            if (sessionStorage.getItem(ADMIN_SESSION_KEY) === "true") {
                setupAdminPanel();
            } else {
                document.getElementById("loginBox").style.display = "block";
                document.getElementById("adminPanel").style.display = "none";
            }
        }

        // =========================================================================
        // 3. ÙˆØ¸Ø§Ø¦Ù Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        // =========================================================================

        /**
         * ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù† Apps Script
         */
        async function loadNotes() {
            const notesList = document.getElementById("notesList");
            notesList.innerHTML = '<div class="empty-state" style="text-align: center; padding: 40px; color: var(--gray);"><i class="fas fa-spinner fa-spin" style="font-size: 48px; color: var(--primary);"></i><p style="font-size: 18px;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª...</p></div>';
            
            try {
                const res = await fetch(scriptURL + "?getData");
                const result = await res.json();
                
                if (result.success && Array.isArray(result.data)) {
                    // ÙØ±Ø² Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª: (ØºÙŠØ± Ù…ÙØ±Ø¯ÙˆØ¯ Ø¹Ù„ÙŠÙ‡Ø§) Ø£ÙˆÙ„Ø§Ù‹ØŒ Ø«Ù… (Ø§Ù„Ø£Ø­Ø¯Ø«)
                    allNotes = result.data.sort((a, b) => {
                        // 1. Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø£ÙˆÙ„Ø§Ù‹
                        if (!a.reply && b.reply) return -1;
                        if (a.reply && !b.reply) return 1;
                        
                        // 2. Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹ (Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ù‚Ù… Ø§Ù„ØµÙ `row`)
                        return b.row - a.row; 
                    });
                    
                    updateCounters();
                    applyFilter(currentFilter); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ± Ø§Ù„Ø­Ø§Ù„ÙŠ
                } else {
                    throw new Error(result.error || "ØªÙ†Ø³ÙŠÙ‚ Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­");
                }
            } catch (error) {
                notesList.innerHTML = '<div class="empty-state" style="text-align: center; padding: 40px; color: var(--error);"><i class="fas fa-exclamation-triangle" style="font-size: 48px; color: var(--error);"></i><p style="font-size: 18px;">Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª: ' + error.message + '</p></div>';
                console.error("Error loading notes:", error);
            }
        }
        
        /**
         * ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ©
         */
        function updateCounters() {
            const countNew = allNotes.filter(n => !n.reply).length;
            const countReplied = allNotes.filter(n => n.reply).length;

            document.getElementById("countTotal").textContent = allNotes.length;
            document.getElementById("countNew").textContent = countNew;
            document.getElementById("countReplied").textContent = countReplied;
            document.getElementById("countWithImg").textContent = allNotes.filter(n => n.imageURL).length;
        }

        /**
         * ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØµÙÙŠØ© ÙˆØ¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª
         * @param {string} type - Ù†ÙˆØ¹ Ø§Ù„ÙÙ„ØªØ± ("all", "new", "replied", "img")
         */
        function applyFilter(type) {
            currentFilter = type;
            
            // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            document.querySelectorAll(".filter-btn").forEach(b => {
                b.classList.toggle("active", b.dataset.filter === type);
            });

            let filteredNotes = [];
            if (type === "all") filteredNotes = allNotes;
            else if (type === "new") filteredNotes = allNotes.filter(n => !n.reply);
            else if (type === "replied") filteredNotes = allNotes.filter(n => n.reply);
            else if (type === "img") filteredNotes = allNotes.filter(n => n.imageURL);

            renderNotes(filteredNotes);
            selectedNote = null;
            updateSelectedNoteInfo();
        }

        /**
         * Ø±Ø³Ù… Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø©
         * @param {Array<Object>} notes - Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…ØµÙ†ÙØ©
         */
        function renderNotes(notes) {
            const notesList = document.getElementById("notesList");
            
            if (notes.length === 0) {
                notesList.innerHTML = '<div class="empty-state" style="text-align: center; padding: 40px; color: var(--gray);"><i class="far fa-comment-dots" style="font-size: 48px; color: var(--light-gray);"></i><p style="font-size: 18px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù…Ø¹ÙŠØ§Ø± Ø§Ù„ØªØµÙÙŠØ©</p></div>';
                return;
            }

            let out = "";
            notes.forEach((note) => {
                const hasReply = note.reply || note.replyImageURL;
                const isSelected = selectedNote && selectedNote.row === note.row;
                
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ù‚Ù… Ø§Ù„ØµÙ ÙƒÙ…Ø¹Ø±Ù ÙØ±ÙŠØ¯ Ù„Ù„Ø±Ø¨Ø·
                out += `
                <div class="note-box ${hasReply ? 'replied' : 'unreplied'} ${isSelected ? 'selected' : ''}" data-row="${note.row}">
                    <div class="note-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
                        <div class="note-author">${note.Name}</div>
                        <div class="note-date" style="font-size: 14px; color: var(--gray);">${note.date || ""}</div>
                    </div>
                    <div class="note-content">${note.Message}</div>

                    ${note.imageURL
                        ? `<img src="${note.imageURL}" class="note-image" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©" style="width: 100%; max-height: 300px; object-fit: contain; border-radius: 12px; margin-top: 12px; box-shadow: 0 2px 8px var(--shadow);">`
                        : ""}

                    ${
                        hasReply
                        ? `<div class="reply-box">
                                <div class="reply-title" style="font-weight: 700; color: var(--success); margin-bottom: 8px; display: flex; align-items: center; gap: 8px;"><i class="fas fa-reply"></i> Ø±Ø¯ Ø§Ù„Ù…Ø´Ø±Ù</div>
                                ${note.reply ? `<div class="reply-content">${convertLinksToClickable(note.reply)}</div>` : ""}
                                ${note.replyImageURL ? `<img src="${note.replyImageURL}" class="reply-image" alt="ØµÙˆØ±Ø© Ø§Ù„Ø±Ø¯" style="width: 100%; max-height: 300px; object-fit: contain; border-radius: 12px; margin-top: 12px; box-shadow: 0 2px 8px var(--shadow);">` : ""}
                            </div>`
                        : `<div class="pending" style="background: #fef3c7; border-right: 5px solid var(--warning); border-radius: 12px; padding: 16px; margin-top: 16px; text-align: center; color: #92400e; font-weight: 600;"><i class="fas fa-clock" style="margin-left: 8px;"></i> Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø¯</div>`
                    }
                </div>`;
            });

            notesList.innerHTML = out;
        }

        /**
         * ØªØ­Ø¯ÙŠØ¯ Ù…Ù„Ø§Ø­Ø¸Ø© Ù„Ù„Ø±Ø¯
         * @param {number} row - Ø±Ù‚Ù… Ø§Ù„ØµÙ (Ø§Ù„Ù…Ø¹Ø±Ù Ø§Ù„ÙØ±ÙŠØ¯ Ù„Ù„Ù…Ù„Ø§Ø­Ø¸Ø©)
         */
        function handleNoteSelection(row) {
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª
            document.querySelectorAll(".note-box").forEach(el => el.classList.remove("selected"));
            
            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
            const noteElement = document.querySelector(`.note-box[data-row="${row}"]`);
            if (noteElement) {
                noteElement.classList.add("selected");
                
                // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒÙ„ÙŠØ©
                selectedNote = allNotes.find(n => n.row == row);
                updateSelectedNoteInfo();
                
                // ØªÙ…Ø±ÙŠØ± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¹Ù„Ù‰ (ÙÙŠ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø©)
                if (window.innerWidth < 1024) {
                    document.querySelector('.sidebar').scrollIntoView({ behavior: 'smooth' });
                }
            }
        }
        
        /**
         * ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© ÙÙŠ Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø±Ø¯
         */
        function updateSelectedNoteInfo() {
            const infoDiv = document.getElementById("selectedNoteInfo");
            const contentDiv = document.getElementById("selectedNoteContent");
            const authorSpan = document.getElementById("selectedNoteAuthor");
            
            if (selectedNote) {
                infoDiv.style.display = 'block';
                authorSpan.textContent = selectedNote.Name;
                contentDiv.innerHTML = `
                    <div style="font-weight: 600;">Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©:</div>
                    <div style="color: var(--dark); margin-top: 5px;">
                        ${selectedNote.Message.substring(0, 150)}${selectedNote.Message.length > 150 ? '...' : ''}
                    </div>
                `;
            } else {
                infoDiv.style.display = 'none';
            }
        }

        // =========================================================================
        // 4. ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø±Ø¯
        // =========================================================================
        
        /**
         * Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯ Ø¥Ù„Ù‰ Apps Script
         */
        async function sendReply() {
            const reply = document.getElementById("replyText").value.trim();
            const imgFile = document.getElementById("replyImage").files[0];
            const replyStatus = document.getElementById("replyStatus");
            const sendBtn = document.getElementById("sendReplyBtn");
            const adminPass = document.getElementById("adminPass").value.trim(); // Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù…ÙØ¯Ø®Ù„Ø© Ù„ØºØ±Ø¶ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© ÙÙŠ Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø®Ø§Ø¯Ù…

            if (!selectedNote) {
                popup("âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ Ù…Ù„Ø§Ø­Ø¸Ø© Ù„Ù„Ø±Ø¯ Ø¹Ù„ÙŠÙ‡Ø§", "error");
                return;
            }

            if (!reply && !imgFile) {
                popup("âš ï¸ Ø§ÙƒØªØ¨ Ù†Øµ Ø§Ù„Ø±Ø¯ Ø£Ùˆ Ø£Ø±ÙÙ‚ ØµÙˆØ±Ø© Ù„Ù„Ø±Ø¯", "error");
                return;
            }
            
            if (!adminPass) {
                 popup("âš ï¸ ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙÙŠ Ø®Ø§Ù†Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø­ÙØ¸Ù‡Ø§ ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©.", "error");
                 return;
            }

            sendBtn.disabled = true;
            sendBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...';
            replyStatus.style.display = "block";
            replyStatus.textContent = "Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...";
            replyStatus.className = "status-message status-loading";

            let img64 = "";
            if (imgFile) {
                try {
                    img64 = await toBase64(imgFile);
                } catch (e) {
                    popup("âŒ Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ±Ø©.", "error");
                    sendBtn.disabled = false;
                    sendBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯';
                    replyStatus.textContent = "âŒ ÙØ´Ù„ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©.";
                    replyStatus.className = "status-message status-error";
                    return;
                }
            }

            try {
                const response = await fetch(scriptURL, {
                    method: "POST",
                    body: JSON.stringify({
                        type: "reply",
                        row: selectedNote.row,
                        reply: reply,
                        replyImage: img64,
                        password: adminPass // ØªÙ…Ø±ÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© ÙÙŠ Apps Script
                    })
                });

                const result = await response.json();
                
                if (result.success) {
                    popup("âœ” ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­");
                    replyStatus.textContent = "âœ” ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­";
                    replyStatus.className = "status-message status-success";
                    
                    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø­Ù‚ÙˆÙ„
                    document.getElementById("replyText").value = "";
                    document.getElementById("replyImage").value = "";
                    document.getElementById("replyFileName").textContent = "";
                    selectedNote = null; // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ¯

                    // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¨Ø¹Ø¯ ÙØªØ±Ø© Ù‚ØµÙŠØ±Ø©
                    setTimeout(loadNotes, 1000); 
                } else {
                    throw new Error(result.error || "Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ");
                }
            } catch (error) {
                console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„:", error);
                replyStatus.textContent = "âŒ Ø®Ø·Ø£: " + (error.message || "ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
                replyStatus.className = "status-message status-error";
                popup("âŒ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯", "error");
            } finally {
                sendBtn.disabled = false;
                sendBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯';
            }
        }
        
        // =========================================================================
        // 5. ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£Ø­Ø¯Ø§Ø« (Listeners)
        // =========================================================================
        
        document.addEventListener("DOMContentLoaded", () => {
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø© Ø£ÙˆÙ„Ø§Ù‹
            checkSession(); 

            // Ø±Ø¨Ø· Ø­Ø¯Ø« ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            document.getElementById("loginBtn").addEventListener('click', handleLogin);
            
            // ØªÙ…ÙƒÙŠÙ† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø²Ø± Enter
            document.getElementById("adminPass").addEventListener('keypress', (e) => {
                if (e.key === 'Enter') handleLogin();
            });

            // Ø±Ø¨Ø· Ø²Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            document.getElementById("refreshBtn").addEventListener('click', loadNotes);

            // Ø±Ø¨Ø· Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
             document.getElementById("logoutBtn").addEventListener('click', handleLogout);

            // Ø±Ø¨Ø· Ø£Ø­Ø¯Ø§Ø« Ø§Ù„ØªØµÙÙŠØ©
            document.querySelectorAll(".filter-box .filter-btn").forEach(button => {
                button.addEventListener('click', (e) => applyFilter(e.currentTarget.dataset.filter));
            });

            // Ø±Ø¨Ø· Ø­Ø¯Ø« Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªÙÙˆÙŠØ¶ event delegation)
            document.getElementById("notesList").addEventListener('click', (e) => {
                const noteBox = e.target.closest('.note-box');
                if (noteBox && noteBox.dataset.row) {
                    handleNoteSelection(noteBox.dataset.row);
                }
            });

            // Ø±Ø¨Ø· Ø­Ø¯Ø« Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯
            document.getElementById("sendReplyBtn").addEventListener('click', sendReply);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ø³Ù… Ù…Ù„Ù Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø±ÙÙ‚ Ù„Ù„Ø±Ø¯
            document.getElementById("replyImage").addEventListener('change', (e) => {
                const fileName = e.target.files[0] ? e.target.files[0].name : "Ø§Ø®ØªØ± ØµÙˆØ±Ø©";
                document.getElementById("replyFileName").textContent = fileName;
                document.querySelector('.file-input-label span').textContent = e.target.files[0] ? "ØªÙ… Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø©" : "Ø§Ø®ØªØ± ØµÙˆØ±Ø©";
            });
        });
    </script>
</body>
</html>
