<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover">
  <title>Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª â€“ Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù„ÙˆØ´ÙŠ</title>

  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #ff4f9a;
      --primary-soft: #ff8a3d;
      --accent: #7c3aed;
      --bg: #020617;
      --card: rgba(15, 23, 42, 0.96);
      --card-soft: rgba(15, 23, 42, 0.9);
      --text: #f9fafb;
      --muted: #9ca3af;
      --radius-lg: 22px;
      --radius-md: 14px;
      --shadow-soft: 0 20px 50px rgba(0, 0, 0, 0.85);
      --glass-border: rgba(148, 163, 184, 0.45);
      --glow-pink: 0 0 26px rgba(236, 72, 153, 0.85);
      --glow-blue: 0 0 22px rgba(56, 189, 248, 0.9);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
    }

    body {
      font-family: "Cairo", sans-serif;
      background:
        radial-gradient(circle at 0% 0%, rgba(236, 72, 153, 0.25), transparent 55%),
        radial-gradient(circle at 100% 0%, rgba(59, 130, 246, 0.24), transparent 55%),
        radial-gradient(circle at 10% 100%, rgba(249, 115, 22, 0.26), transparent 55%),
        #020617;
      color: var(--text);
      min-height: 100vh;
      padding-bottom: 24px;
    }

    body {
      font-size: 17px;
      line-height: 1.8;
    }

    input,
    textarea,
    button {
      font-size: 17px;
      font-family: inherit;
    }

    @media (max-width: 600px) {
      body {
        font-size: 18px;
      }
      input,
      textarea,
      button {
        font-size: 18px;
      }
    }

    .app-shell {
      max-width: 1120px;
      margin: 0 auto;
      padding: 12px 14px 26px;
    }

    /* Navbar */
    .navbar {
      position: sticky;
      top: 0;
      z-index: 30;
      margin-bottom: 16px;
      background: radial-gradient(circle at 0% 0%, rgba(236, 72, 153, 0.24), transparent 60%),
                  radial-gradient(circle at 100% 0%, rgba(59, 130, 246, 0.35), transparent 55%),
                  rgba(15, 23, 42, 0.98);
      backdrop-filter: blur(20px);
      border-radius: 18px;
      padding: 10px 14px;
      box-shadow: 0 16px 40px rgba(0, 0, 0, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.4);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .nav-title {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .nav-icon {
      width: 36px;
      height: 36px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 0%, #facc15, #f97316 40%, #ec4899 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      box-shadow: var(--glow-pink);
    }

    .nav-text-main {
      font-size: 18px;
      font-weight: 700;
    }

    .nav-text-sub {
      font-size: 12px;
      color: #e5e7eb;
      opacity: 0.9;
    }

    .nav-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: flex-end;
    }

    .nav-btn {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.85);
      color: #e5e7eb;
      padding: 6px 12px;
      font-size: 13px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      transition: 0.15s ease;
    }

    .nav-btn:hover {
      border-color: rgba(248, 250, 252, 0.9);
      color: #f9fafb;
    }

    .nav-btn-primary {
      background: linear-gradient(135deg, #f97316, #ec4899, #6366f1);
      border: none;
      box-shadow: var(--glow-pink);
    }

    /* Layout */
    .grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 18px;
      margin-top: 10px;
    }

    @media (min-width: 960px) {
      .grid {
        grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
      }
    }

    .card {
      background: var(--card);
      border-radius: var(--radius-lg);
      padding: 14px 14px 16px;
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(18px);
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 12px;
    }

    .card-title-wrap {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .card-title {
      font-size: 17px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 7px;
    }

    .card-title span.icon {
      font-size: 19px;
    }

    .card-caption {
      font-size: 12px;
      color: var(--muted);
    }

    .badge-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: var(--glow-blue);
    }

    /* Login card */
    #loginCard {
      max-width: 480px;
      margin: 40px auto;
      text-align: center;
    }

    #loginCard .card-title {
      justify-content: center;
    }

    .form-group {
      margin-top: 12px;
      text-align: right;
    }

    label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 4px;
      color: #e5e7eb;
    }

    input[type="password"],
    input[type="text"],
    textarea {
      width: 100%;
      border-radius: var(--radius-md);
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: radial-gradient(circle at 0% 0%, rgba(79, 70, 229, 0.24), rgba(15, 23, 42, 0.96));
      padding: 11px 12px;
      font-family: inherit;
      font-size: 16px;
      color: var(--text);
      transition: 0.2s ease;
    }

    textarea {
      resize: vertical;
      min-height: 110px;
    }

    input::placeholder,
    textarea::placeholder {
      color: rgba(148, 163, 184, 0.9);
    }

    input:focus,
    textarea:focus {
      outline: none;
      border-color: rgba(248, 250, 252, 0.9);
      box-shadow: 0 0 0 1px rgba(248, 250, 252, 0.6), var(--glow-pink);
      background: radial-gradient(circle at 0% 0%, rgba(248, 250, 252, 0.12), rgba(15, 23, 42, 0.98));
    }

    .hint {
      font-size: 12px;
      color: var(--muted);
      margin-top: 3px;
    }

    .btn-main {
      width: 100%;
      margin-top: 14px;
      border-radius: 999px;
      border: none;
      padding: 11px 12px;
      font-size: 17px;
      font-weight: 700;
      font-family: inherit;
      cursor: pointer;
      background-image: linear-gradient(135deg, #f97316, #ec4899, #6366f1);
      color: #f9fafb;
      box-shadow:
        0 12px 30px rgba(236, 72, 153, 0.55),
        0 0 0 1px rgba(248, 250, 252, 0.1);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 7px;
      transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s;
    }

    .btn-main:active {
      transform: translateY(1px) scale(0.985);
      box-shadow:
        0 8px 22px rgba(236, 72, 153, 0.5),
        0 0 0 1px rgba(248, 250, 252, 0.2);
      filter: brightness(0.96);
    }

    .btn-main[disabled] {
      opacity: 0.7;
      cursor: wait;
      filter: grayscale(0.4);
    }

    .status-message {
      margin-top: 8px;
      font-size: 13px;
      text-align: center;
      color: var(--muted);
      min-height: 18px;
    }

    /* Stats */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin-bottom: 8px;
      margin-top: 4px;
    }

    @media (min-width: 780px) {
      .stats-grid {
        grid-template-columns: repeat(4, minmax(0, 1fr));
      }
    }

    .stat-card {
      background: var(--card-soft);
      border-radius: 16px;
      padding: 10px 10px;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.6);
      text-align: center;
    }

    .stat-label {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 3px;
    }

    .stat-value {
      font-size: 21px;
      font-weight: 800;
    }

    .stat-pulse-green {
      color: #22c55e;
      text-shadow: var(--glow-blue);
    }

    .stat-pulse-pink {
      color: #fb7185;
      text-shadow: var(--glow-pink);
    }

    /* Filter buttons */
    .filter-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 8px;
      margin-top: 6px;
    }

    .filter-btn {
      flex: 1;
      min-width: 80px;
      font-size: 12px;
      padding: 6px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.9);
      color: var(--muted);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
      transition: 0.15s ease;
    }

    .filter-btn.active {
      border-color: rgba(248, 250, 252, 0.9);
      color: #f9fafb;
      background: radial-gradient(circle at 0% 0%, rgba(236, 72, 153, 0.35), rgba(15, 23, 42, 0.98));
      box-shadow: var(--glow-pink);
    }

    /* Notes list */
    .notes-container {
      max-height: 560px;
      overflow-y: auto;
      padding-right: 4px;
      margin-top: 6px;
    }

    .notes-container::-webkit-scrollbar {
      width: 5px;
    }

    .notes-container::-webkit-scrollbar-thumb {
      background: rgba(148, 163, 184, 0.9);
      border-radius: 999px;
    }

    .note-card {
      background: radial-gradient(circle at 0% 0%, rgba(236, 72, 153, 0.18), rgba(15, 23, 42, 0.96));
      border-radius: 16px;
      padding: 8px 9px 10px;
      margin-bottom: 9px;
      border-right: 4px solid rgba(236, 72, 153, 0.9);
      box-shadow: 0 9px 22px rgba(15, 23, 42, 0.98);
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: 0.15s ease;
    }

    .note-card.selected {
      border-color: #38bdf8;
      box-shadow: 0 0 0 1px rgba(248, 250, 252, 0.9), var(--glow-blue);
    }

    .note-card.replied {
      border-right-color: #22c55e;
    }

    .note-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 6px;
      margin-bottom: 3px;
    }

    .note-name {
      font-size: 14px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .note-meta-badge {
      font-size: 10px;
      padding: 3px 6px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.85);
      border: 1px solid rgba(148, 163, 184, 0.8);
      color: #e5e7eb;
    }

    .note-date {
      font-size: 11px;
      color: var(--muted);
      white-space: nowrap;
    }

    .note-snippet {
      font-size: 14px;
      color: #e5e7eb;
      max-height: 52px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: pre-wrap;
    }

    .note-snippet a {
      color: #38bdf8;
      text-decoration: underline;
      font-weight: 600;
      word-break: break-all;
    }

    .note-footer-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 4px;
      font-size: 11px;
      color: var(--muted);
    }

    .pill-status {
      padding: 3px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.9);
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .pill-status span.dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
    }

    .pill-status.pending span.dot {
      background: #eab308;
      box-shadow: 0 0 12px rgba(250, 204, 21, 0.85);
    }

    .pill-status.done span.dot {
      background: #22c55e;
      box-shadow: var(--glow-blue);
    }

    /* Reply panel */
    .reply-card {
      background: var(--card);
      border-radius: var(--radius-lg);
      padding: 14px 14px 16px;
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(18px);
    }

    .selected-box {
      background: radial-gradient(circle at 0% 0%, rgba(96, 165, 250, 0.24), rgba(15, 23, 42, 0.96));
      border-radius: 16px;
      padding: 10px 10px 11px;
      margin-bottom: 10px;
      border-right: 4px solid #38bdf8;
      box-shadow: 0 8px 20px rgba(15, 23, 42, 0.95);
    }

    .selected-title-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 6px;
      margin-bottom: 4px;
    }

    .selected-name {
      font-size: 14px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .selected-date {
      font-size: 11px;
      color: var(--muted);
      white-space: nowrap;
    }

    .selected-note-box {
      font-size: 14px;
      color: #e5e7eb;
      white-space: pre-wrap;
      margin-top: 4px;
    }

    .selected-note-box a {
      color: #38bdf8;
      text-decoration: underline;
      font-weight: 600;
      word-break: break-all;
    }

    .selected-actions {
      display: flex;
      gap: 6px;
      margin-top: 7px;
      flex-wrap: wrap;
    }

    .small-btn {
      flex: 1;
      min-width: 120px;
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      padding: 6px 8px;
      font-size: 13px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
      transition: 0.15s ease;
    }

    .small-btn.danger {
      border-color: rgba(248, 113, 113, 0.9);
      color: #fecaca;
    }

    .small-btn:hover {
      border-color: rgba(248, 250, 252, 0.9);
    }

    .file-upload {
      margin-top: 14px;
    }

    .file-label {
      width: 100%;
      border-radius: var(--radius-md);
      padding: 9px 10px;
      border: 1px dashed rgba(148, 163, 184, 0.9);
      font-size: 13px;
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 7px;
      background: rgba(15, 23, 42, 0.9);
      backdrop-filter: blur(10px);
      cursor: pointer;
      justify-content: center;
    }

    .file-label span.icon {
      font-size: 16px;
      color: var(--primary-soft);
    }

    .file-preview {
      margin-top: 8px;
      text-align: center;
    }

    .file-preview img {
      max-width: 100%;
      max-height: 220px;
      border-radius: 12px;
      box-shadow: 0 8px 22px rgba(15, 23, 42, 0.95);
    }

    .btn-remove-img {
      margin-top: 6px;
      border-radius: 999px;
      border: none;
      padding: 5px 10px;
      font-size: 13px;
      background: linear-gradient(135deg, #ef4444, #b91c1c);
      color: #fee2e2;
      cursor: pointer;
    }

    .reply-status-message {
      margin-top: 8px;
      font-size: 13px;
      text-align: center;
      color: var(--muted);
      min-height: 18px;
    }

    /* Empty states */
    .empty-state {
      text-align: center;
      padding: 26px 8px;
      color: var(--muted);
      font-size: 14px;
    }

    .spinner {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      border: 3px solid rgba(148, 163, 184, 0.5);
      border-top-color: #38bdf8;
      margin: 0 auto 10px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    /* Modal ØµÙˆØ± */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.96);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 100;
    }

    .modal img {
      max-width: 95vw;
      max-height: 90vh;
      border-radius: 18px;
      box-shadow: 0 22px 60px rgba(0, 0, 0, 0.9);
    }

    .modal-close {
      position: absolute;
      top: 14px;
      inset-inline-start: 16px;
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      padding: 4px 10px;
      font-size: 13px;
      cursor: pointer;
    }

    .note-snippet,
    .selected-note-box,
    .reply-text {
      word-wrap: break-word;
      word-break: break-word;
    }
  </style>
</head>
<body>
<div class="app-shell">
  <!-- NAVBAR -->
  <div class="navbar">
    <div class="nav-title">
      <div class="nav-icon">âš™ï¸</div>
      <div>
        <div class="nav-text-main">Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</div>
        <div class="nav-text-sub">Ø¥Ø¯Ø§Ø±Ø© Ø£Ø³Ø¦Ù„Ø© ÙˆÙ…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³ â€“ Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù„ÙˆØ´ÙŠ</div>
      </div>
    </div>
    <div class="nav-actions">
      <button class="nav-btn" type="button" onclick="window.location.href='index.html'">
        â¬…ï¸ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
      </button>
      <button class="nav-btn nav-btn-primary" type="button" id="navRefreshBtn" onclick="loadNotes()">
        ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      </button>
    </div>
  </div>

  <!-- LOGIN CARD -->
  <div id="loginCard" class="card">
    <div class="card-header">
      <div class="card-title-wrap" style="width:100%; text-align:center;">
        <div class="card-title" style="justify-content:center;">
          <span class="icon">ğŸ”</span>
          <span>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©</span>
        </div>
        <p class="card-caption" style="text-align:center;">
          Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…. ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ© ØªÙ… Ø¶Ø¨Ø·Ù‡Ø§ Ù…Ù† Ø®Ù„Ø§Ù„ Google Apps Script.
        </p>
      </div>
    </div>
    <div class="form-group">
      <label for="adminPass">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
      <input id="adminPass" type="password" placeholder="aysha123">
      <p class="hint">Ù„Ø£Ø³Ø¨Ø§Ø¨ Ø£Ù…Ù†ÙŠØ©ØŒ Ù„Ø§ ØªØ´Ø§Ø±Ùƒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ø¹ Ø§Ù„Ø·Ù„Ø§Ø¨.</p>
    </div>
    <button class="btn-main" type="button" id="loginBtn" onclick="handleLogin()">
      <span>Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span> <span>ğŸš€</span>
    </button>
    <div id="loginStatus" class="status-message"></div>
  </div>

  <!-- DASHBOARD -->
  <div id="dashboard" style="display:none;">
    <div class="grid">
      <!-- Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø£ÙŠØ³Ø±: Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª + Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª -->
      <section class="card">
        <div class="card-header">
          <div class="card-title-wrap">
            <div class="card-title">
              <span class="icon">ğŸ“Š</span>
              <span>Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©</span>
            </div>
            <p class="card-caption">Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø© Ø¹Ù† Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆØ§Ù„Ø±Ø¯ÙˆØ¯.</p>
          </div>
        </div>

        <!-- Stats -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</div>
            <div class="stat-value stat-pulse-pink" id="totalCount">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø¯</div>
            <div class="stat-value stat-pulse-green" id="pendingCount">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">ØªÙ… Ø§Ù„Ø±Ø¯ Ø¹Ù„ÙŠÙ‡Ø§</div>
            <div class="stat-value" id="repliedCount">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù„Ù‡Ø§ ØµÙˆØ±Ø©</div>
            <div class="stat-value" id="withImageCount">0</div>
          </div>
        </div>

        <!-- Filters -->
        <div class="filter-row">
          <button class="filter-btn active" data-filter="all" onclick="applyFilter('all', this)">
            <span>ğŸ“‹ Ø§Ù„ÙƒÙ„</span>
          </button>
          <button class="filter-btn" data-filter="pending" onclick="applyFilter('pending', this)">
            <span>â³ Ø¨Ø¯ÙˆÙ† Ø±Ø¯</span>
          </button>
          <button class="filter-btn" data-filter="replied" onclick="applyFilter('replied', this)">
            <span>âœ… ØªÙ… Ø§Ù„Ø±Ø¯</span>
          </button>
          <button class="filter-btn" data-filter="withImage" onclick="applyFilter('withImage', this)">
            <span>ğŸ–¼ Ù…Ø¹ ØµÙˆØ±Ø©</span>
          </button>
        </div>

        <!-- Notes list -->
        <div class="notes-container" id="notesList">
          <div class="empty-state">
            <div class="spinner"></div>
            Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª...
          </div>
        </div>
      </section>

      <!-- Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø£ÙŠÙ…Ù†: Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© -->
      <section class="reply-card">
        <div class="card-header">
          <div class="card-title-wrap">
            <div class="card-title">
              <span class="icon">ğŸ’¬</span>
              <span>Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©</span>
            </div>
            <p class="card-caption">
              Ø§Ø®ØªØ± Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©ØŒ Ø«Ù… Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ø¯ ÙˆØ£Ø¶Ù ØµÙˆØ±Ø© Ø¥Ù† Ø±ØºØ¨Øª.
            </p>
          </div>
        </div>

        <div id="selectedBox" class="selected-box" style="display:none;">
          <div class="selected-title-row">
            <div class="selected-name">
              <span>ğŸ‘¤</span>
              <span id="selectedName">...</span>
            </div>
            <div class="selected-date" id="selectedDate"></div>
          </div>
          <div class="selected-note-box" id="selectedNoteText"></div>
          <div id="selectedImageWrapper" style="margin-top:6px; display:none;">
            <img id="selectedImage" src="" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©" style="max-width:100%; border-radius:12px; cursor:pointer; box-shadow:0 8px 20px rgba(15,23,42,0.95);">
          </div>
          <div class="selected-actions">
            <button class="small-btn" type="button" onclick="scrollToReplyInput()">
              âœï¸ ÙƒØªØ§Ø¨Ø© / ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ø¯
            </button>
            <button class="small-btn danger" type="button" onclick="deleteSelectedNote()">
              ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©
            </button>
          </div>
        </div>

        <div class="form-group">
          <label for="replyText">Ù†Øµ Ø§Ù„Ø±Ø¯</label>
          <textarea id="replyText" placeholder="Ø§ÙƒØªØ¨ Ø±Ø¯Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ù‡Ù†Ø§..."></textarea>
          <p class="hint">Ø³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ÙÙŠ Ø§Ù„Ø±Ø¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¥Ù„Ù‰ Ø±ÙˆØ§Ø¨Ø· Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù†Ù‚Ø±.</p>
        </div>

        <div class="file-upload">
          <label class="file-label" for="replyImage">
            <span class="icon">ğŸ–¼</span>
            <span id="replyImageLabel">Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø© Ù„Ù„Ø±Ø¯ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</span>
          </label>
          <input type="file" id="replyImage" accept="image/*" style="display:none;">
          <div class="file-preview" id="replyImagePreview" style="display:none;">
            <img id="replyImagePreviewImg" src="" alt="Ù…Ø¹Ø§ÙŠÙ†Ø© ØµÙˆØ±Ø© Ø§Ù„Ø±Ø¯">
            <button type="button" class="btn-remove-img" onclick="removeReplyImage()">Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØµÙˆØ±Ø©</button>
          </div>
        </div>

        <button class="btn-main" type="button" id="sendReplyBtn" onclick="sendReply()">
          <span>Ø¥Ø±Ø³Ø§Ù„ / ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø¯</span> <span>ğŸ“¨</span>
        </button>
        <div class="reply-status-message" id="replyStatus"></div>
      </section>
    </div>
  </div>
</div>

<!-- Modal Ù„Ù„ØµÙˆØ± -->
<div id="imgModal" class="modal" onclick="hideModal()">
  <button class="modal-close" type="button" onclick="hideModal();event.stopPropagation();">Ø¥ØºÙ„Ø§Ù‚ âœ•</button>
  <img id="modalImg" alt="">
</div>

<script>
  // Ø±Ø§Ø¨Ø· Ø§Ù„ÙˆÙŠØ¨ Ø¢Ø¨ â€“ ØªØ£ÙƒØ¯ Ø£Ù†Ù‡ Ù†ÙØ³ Ø§Ù„Ø±Ø§Ø¨Ø· ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
  const scriptURL = "https://script.google.com/macros/s/AKfycbzI1WkE0fUr6HaYiNMBiDn9JfTIByXjCvjQ6jnTyasz5Asyn0mLX4dNrcLVFADVHKMr/exec";

  let allNotes = [];
  let filteredNotes = [];
  let currentFilter = "all";
  let selectedNote = null;
  let adminToken = null;

  const loginCard = document.getElementById("loginCard");
  const dashboard = document.getElementById("dashboard");
  const loginStatus = document.getElementById("loginStatus");
  const notesList = document.getElementById("notesList");
  const totalCount = document.getElementById("totalCount");
  const pendingCount = document.getElementById("pendingCount");
  const repliedCount = document.getElementById("repliedCount");
  const withImageCount = document.getElementById("withImageCount");
  const selectedBox = document.getElementById("selectedBox");
  const selectedName = document.getElementById("selectedName");
  const selectedDate = document.getElementById("selectedDate");
  const selectedNoteText = document.getElementById("selectedNoteText");
  const selectedImageWrapper = document.getElementById("selectedImageWrapper");
  const selectedImage = document.getElementById("selectedImage");
  const replyText = document.getElementById("replyText");
  const replyImageInput = document.getElementById("replyImage");
  const replyImageLabel = document.getElementById("replyImageLabel");
  const replyImagePreview = document.getElementById("replyImagePreview");
  const replyImagePreviewImg = document.getElementById("replyImagePreviewImg");
  const replyStatus = document.getElementById("replyStatus");
  const loginBtn = document.getElementById("loginBtn");

  // linkify Ù„Ù„Ø±ÙˆØ§Ø¨Ø·
  function linkify(text) {
    if (!text) return "";
    const urlRegex = /(https?:\/\/[^\s]+)/g;
    return text.replace(urlRegex, (url) => {
      const clean = url.replace(/[.,!?;:)]$/, "");
      return `<a href="${clean}" target="_blank" rel="noopener noreferrer">${clean}</a>`;
    });
  }

  function showLoginStatus(message, color = "#9ca3af") {
    loginStatus.textContent = message;
    loginStatus.style.color = color;
  }

  function showReplyStatus(message, color = "#9ca3af") {
    replyStatus.textContent = message;
    replyStatus.style.color = color;
  }

  function toBase64(file) {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.onload = () => resolve(reader.result);
      reader.onerror = err => reject(err);
      reader.readAsDataURL(file);
    });
  }

  async function handleLogin() {
    const pass = document.getElementById("adminPass").value.trim();
    if (!pass) {
      showLoginStatus("âŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.", "#f97373");
      return;
    }

    loginBtn.disabled = true;
    showLoginStatus("â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±...", "#93c5fd");

    try {
      const res = await fetch(scriptURL, {
        method: "POST",
        body: JSON.stringify({
          // ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¯Ø¹Ù… Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹: type:"login"
          type: "login",
          password: pass
        })
      });
      const result = await res.json();
      if (result.success && result.token) {
        adminToken = result.token;
        showLoginStatus("âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­.", "#4ade80");
        loginCard.style.display = "none";
        dashboard.style.display = "block";
        loadNotes();
      } else {
        showLoginStatus("âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©.", "#f97373");
      }
    } catch (e) {
      console.error(e);
      showLoginStatus("âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù….", "#f97373");
    } finally {
      loginBtn.disabled = false;
    }
  }

  async function loadNotes() {
    if (!adminToken) {
      showLoginStatus("Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬Ù„Ø³Ø© Ø£Ùˆ Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø¹Ø¯.", "#f97373");
      return;
    }

    notesList.innerHTML = `
      <div class="empty-state">
        <div class="spinner"></div>
        Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª...
      </div>
    `;

    try {
      const res = await fetch(scriptURL, {
        method: "POST",
        body: JSON.stringify({
          // ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¯Ø¹Ù… Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹: type:"adminGet"
          type: "adminGet",
          token: adminToken
        })
      });
      const result = await res.json();
      if (!result.success || !Array.isArray(result.data)) {
        notesList.innerHTML = `<div class="empty-state">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.</div>`;
        return;
      }

      allNotes = result.data.sort((a, b) => (b.row || 0) - (a.row || 0));
      updateStats();
      applyFilter(currentFilter);
    } catch (e) {
      console.error(e);
      notesList.innerHTML = `<div class="empty-state">Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª.</div>`;
    }
  }

  function updateStats() {
    const total = allNotes.length;
    const replied = allNotes.filter(n => n.reply && n.reply.trim() !== "").length;
    const pending = total - replied;
    const withImg = allNotes.filter(n => n.image).length;

    totalCount.textContent = total;
    pendingCount.textContent = pending;
    repliedCount.textContent = replied;
    withImageCount.textContent = withImg;
  }

  function applyFilter(filter, btnEl) {
    currentFilter = filter;

    if (btnEl) {
      document.querySelectorAll(".filter-btn").forEach(b => b.classList.remove("active"));
      btnEl.classList.add("active");
    }

    switch (filter) {
      case "pending":
        filteredNotes = allNotes.filter(n => !n.reply || !n.reply.trim());
        break;
      case "replied":
        filteredNotes = allNotes.filter(n => n.reply && n.reply.trim());
        break;
      case "withImage":
        filteredNotes = allNotes.filter(n => n.image);
        break;
      default:
        filteredNotes = allNotes;
    }

    renderNotes();
  }

  function renderNotes() {
    if (!filteredNotes.length) {
      notesList.innerHTML = `<div class="empty-state">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„ØªØµÙÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©.</div>`;
      return;
    }

    let html = "";
    filteredNotes.forEach(n => {
      const hasReply = n.reply && n.reply.trim();
      const isSelected = selectedNote && selectedNote.row === n.row;
      const name = n.name || "Ù…Ø¬Ù‡ÙˆÙ„";
      const snippet = (n.note || "").split("\n").slice(0, 2).join(" ");
      const date = formatDate(n.date);

      html += `
        <article class="note-card ${hasReply ? "replied" : ""} ${isSelected ? "selected" : ""}"
                 onclick="selectNote(${n.row})">
          <div class="note-header">
            <div>
              <div class="note-name">
                <span>ğŸ‘¤</span><span>${name}</span>
              </div>
              <span class="note-meta-badge">Ø±Ù‚Ù… Ø§Ù„ØµÙ: ${n.row}</span>
            </div>
            <div class="note-date">${date}</div>
          </div>
          <div class="note-snippet">${linkify(snippet.replace(/\n/g, "<br>"))}</div>
          <div class="note-footer-row">
            <div class="pill-status ${hasReply ? "done" : "pending"}">
              <span class="dot"></span>
              <span>${hasReply ? "ØªÙ… Ø§Ù„Ø±Ø¯" : "Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø¯"}</span>
            </div>
            <div>${n.image ? "ğŸ–¼ Ø¨Ù‡Ø§ ØµÙˆØ±Ø©" : ""}</div>
          </div>
        </article>
      `;
    });

    notesList.innerHTML = html;
  }

  function formatDate(d) {
    if (!d) return "";
    try {
      const dt = new Date(d);
      if (isNaN(dt.getTime())) return "";
      return dt.toLocaleString("ar-OM", {
        year: "numeric",
        month: "short",
        day: "numeric",
        hour: "2-digit",
        minute: "2-digit",
        hour12: false
      });
    } catch {
      return "";
    }
  }

  function selectNote(row) {
    const note = allNotes.find(n => n.row === row);
    if (!note) return;

    selectedNote = note;

    // Ø¥Ø¹Ø§Ø¯Ø© ØªÙ„ÙˆÙŠÙ† Ø§Ù„Ø¹Ù†Ø§ØµØ±
    document.querySelectorAll(".note-card").forEach(card => {
      card.classList.remove("selected");
    });
    const selectedCard = Array.from(document.querySelectorAll(".note-card"))
      .find(c => c.textContent.includes("Ø±Ù‚Ù… Ø§Ù„ØµÙ: " + row));
    if (selectedCard) selectedCard.classList.add("selected");

    // ØªØ¹Ø¨Ø¦Ø© Ù…Ø±Ø¨Ø¹ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©
    selectedBox.style.display = "block";
    selectedName.textContent = note.name || "Ù…Ø¬Ù‡ÙˆÙ„";
    selectedDate.textContent = formatDate(note.date);
    selectedNoteText.innerHTML = linkify((note.note || "").replace(/\n/g, "<br>"));

    if (note.image) {
      selectedImageWrapper.style.display = "block";
      selectedImage.src = note.image;
      selectedImage.onclick = () => showModal(note.image);
    } else {
      selectedImageWrapper.style.display = "none";
    }

    // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø±Ø¯ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¥Ù† ÙˆØ¬Ø¯
    replyText.value = note.reply || "";
    replyStatus.textContent = "";

    // ØµÙˆØ±Ø© Ø§Ù„Ø±Ø¯ Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù„Ø§ ÙŠÙ…ÙƒÙ† Ù‚Ø±Ø§Ø¡ØªÙ‡Ø§ Ù…Ù† Ø§Ù„Ù€sheet ÙƒÙ€ Base64 Ø¨Ø³Ù‡ÙˆÙ„Ø© Ø¹Ø§Ø¯Ø©Ù‹ØŒ
    // Ù„Ø°Ù„Ùƒ Ù†ØªØ±ÙƒÙ‡Ø§ ÙØ§Ø±ØºØ© ÙÙŠ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© (Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙÙ‚Ø·).
  }

  function scrollToReplyInput() {
    replyText.scrollIntoView({ behavior: "smooth", block: "center" });
    replyText.focus();
  }

  replyImageInput.addEventListener("change", async () => {
    const file = replyImageInput.files[0];
    if (!file) {
      replyImageLabel.textContent = "Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø© Ù„Ù„Ø±Ø¯ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)";
      replyImagePreview.style.display = "none";
      return;
    }

    if (file.size > 5 * 1024 * 1024) {
      showReplyStatus("âŒ Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© Ø£ÙƒØ¨Ø± Ù…Ù† 5MB.", "#f97373");
      replyImageInput.value = "";
      replyImagePreview.style.display = "none";
      return;
    }

    replyImageLabel.textContent = file.name;
    const reader = new FileReader();
    reader.onload = e => {
      replyImagePreviewImg.src = e.target.result;
      replyImagePreview.style.display = "block";
    };
    reader.readAsDataURL(file);
  });

  function removeReplyImage() {
    replyImageInput.value = "";
    replyImageLabel.textContent = "Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø© Ù„Ù„Ø±Ø¯ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)";
    replyImagePreview.style.display = "none";
  }

  async function sendReply() {
    if (!selectedNote) {
      showReplyStatus("âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø£ÙˆÙ„Ø§Ù‹.", "#f97373");
      return;
    }
    if (!adminToken) {
      showReplyStatus("âŒ Ø§Ù„Ø¬Ù„Ø³Ø© Ù…Ù†ØªÙ‡ÙŠØ©. Ø£Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.", "#f97373");
      return;
    }

    const reply = replyText.value.trim();
    const file = replyImageInput.files[0];
    if (!reply && !file) {
      showReplyStatus("âš ï¸ Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ø¯ Ø£Ùˆ Ø£Ø±ÙÙ‚ ØµÙˆØ±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.", "#f97373");
      return;
    }

    let img64 = "";
    if (file) {
      if (file.size > 5 * 1024 * 1024) {
        showReplyStatus("âŒ Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© Ø£ÙƒØ¨Ø± Ù…Ù† 5MB.", "#f97373");
        return;
      }
      img64 = await toBase64(file);
    }

    const btn = document.getElementById("sendReplyBtn");
    btn.disabled = true;
    showReplyStatus("â³ Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯...", "#93c5fd");

    try {
      const res = await fetch(scriptURL, {
        method: "POST",
        body: JSON.stringify({
          // ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¯Ø¹Ù… Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹: type:"adminReply"
          type: "adminReply",
          token: adminToken,
          row: selectedNote.row,
          reply: reply,
          replyImage: img64
        })
      });
      const result = await res.json();
      if (result.success) {
        showReplyStatus("âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­.", "#4ade80");
        removeReplyImage();
        await loadNotes();
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ø¯ÙŠØ¯ Ù†ÙØ³ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¥Ù† ÙˆØ¬Ø¯Øª
        if (selectedNote) selectNote(selectedNote.row);
      } else {
        showReplyStatus("âŒ Ø®Ø·Ø£: " + (result.error || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"), "#f97373");
      }
    } catch (e) {
      console.error(e);
      showReplyStatus("âŒ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„.", "#f97373");
    } finally {
      btn.disabled = false;
    }
  }

  async function deleteSelectedNote() {
    if (!selectedNote) {
      showReplyStatus("âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ø­Ø¯Ø¯Ø© Ù„Ù„Ø­Ø°Ù.", "#f97373");
      return;
    }
    if (!adminToken) {
      showReplyStatus("âŒ Ø§Ù„Ø¬Ù„Ø³Ø© Ù…Ù†ØªÙ‡ÙŠØ©. Ø£Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.", "#f97373");
      return;
    }

    const confirmed = confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.");
    if (!confirmed) return;

    showReplyStatus("â³ Ø¬Ø§Ø±ÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©...", "#93c5fd");

    try {
      const res = await fetch(scriptURL, {
        method: "POST",
        body: JSON.stringify({
          // ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¯Ø¹Ù… Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹: type:"adminDelete"
          type: "adminDelete",
          token: adminToken,
          row: selectedNote.row
        })
      });
      const result = await res.json();
      if (result.success) {
        showReplyStatus("ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ø¨Ù†Ø¬Ø§Ø­.", "#f97373");
        selectedNote = null;
        selectedBox.style.display = "none";
        await loadNotes();
      } else {
        showReplyStatus("âŒ ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©: " + (result.error || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"), "#f97373");
      }
    } catch (e) {
      console.error(e);
      showReplyStatus("âŒ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­Ø°Ù Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©.", "#f97373");
    }
  }

  // Modal Ù„Ù„ØµÙˆØ±
  function showModal(src) {
    const modal = document.getElementById("imgModal");
    const img = document.getElementById("modalImg");
    img.src = src;
    modal.style.display = "flex";
  }

  function hideModal() {
    const modal = document.getElementById("imgModal");
    modal.style.display = "none";
    document.getElementById("modalImg").src = "";
  }

  // Enter Ø¹Ù„Ù‰ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
  document.getElementById("adminPass").addEventListener("keypress", (e) => {
    if (e.key === "Enter") {
      handleLogin();
    }
  });
</script>
</body>
</html>
